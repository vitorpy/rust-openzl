# Copyright (c) Meta Platforms, Inc. and affiliates.

load("@fbcode_macros//build_defs:cpp_unittest.bzl", "cpp_unittest")

oncall("data_compression")

cpp_unittest(
    # @autodeps-skip
    name = "test_training",
    srcs = [
        "test_ace.cpp",
        "test_clustering.cpp",
        "test_clustering_benchmarks.cpp",
        "test_clustering_config_builder.cpp",
        "test_genetic_algorithm.cpp",
        "test_sample_collection.cpp",
        "test_sample_limiter.cpp",
        "test_thread_pool.cpp",
    ],
    headers = [
        "benchmark_files/ppmf_unit_segment.h",
    ],
    deps = [
        "//data_compression/experimental/zstrong:zstronglib",
        "//data_compression/experimental/zstrong/custom_parsers:custom_parsers",
        "//data_compression/experimental/zstrong/custom_parsers/csv:csv_parser",
        "//data_compression/experimental/zstrong/tests/datagen:datagen",
        "//data_compression/experimental/zstrong/tools/training:train",
        "//data_compression/experimental/zstrong/tools/training/ace:automated_compressor_explorer",
        "//data_compression/experimental/zstrong/tools/training/clustering:clustering_graph_trainer",
        "//data_compression/experimental/zstrong/tools/training/clustering:train_api",
        "//data_compression/experimental/zstrong/tools/training/clustering:training_clustering",
        "//data_compression/experimental/zstrong/tools/training/utils:genetic_algorithm",
        "//data_compression/experimental/zstrong/tools/training/utils:training_utils",
    ],
)
