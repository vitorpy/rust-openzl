# Copyright (c) Meta Platforms, Inc. and affiliates.

load("@fbcode_macros//build_defs:python_library.bzl", "python_library")
load("//data_compression/experimental/zstrong:defs.bzl", "zs_binary", "zs_cxxbinary", "zs_library")

oncall("data_compression")

zs_binary(
    name = "compress",
    srcs = ["compress_app.cpp"],
    deps = [
        "//data_compression/experimental/zstrong:zstronglib",
    ],
)

zs_binary(
    name = "zs2_pipeline",
    srcs = ["zs2_pipeline.c"],
    deps = [
        "//data_compression/experimental/zstrong:zstronglib",
        "//data_compression/experimental/zstrong/tools:fileio",
    ],
)

zs_binary(
    name = "zs2_trygraph",
    srcs = ["zs2_trygraph.c"],
    deps = [
        "//data_compression/experimental/zstrong:zstronglib",
        "//data_compression/experimental/zstrong/tools:fileio",
    ],
)

zs_binary(
    name = "zs2_selector",
    srcs = ["zs2_selector.c"],
    deps = [
        "//data_compression/experimental/zstrong:zstronglib",
        "//data_compression/experimental/zstrong/tools:fileio",
    ],
)

zs_library(
    name = "example_utils",
    srcs = ["example_utils.cpp"],
    headers = ["example_utils.h"],
    deps = [
        "//data_compression/experimental/zstrong:zstronglib",
        "//data_compression/experimental/zstrong/tools:fileio",
    ],
)

zs_cxxbinary(
    name = "numeric_array",
    srcs = ["numeric_array.cpp"],
    deps = [
        ":example_utils",
        "//data_compression/experimental/zstrong:zstronglib",
    ],
)

zs_cxxbinary(
    name = "training",
    srcs = ["training.cpp"],
    deps = [
        ":example_utils",
        "//data_compression/experimental/zstrong:zstronglib",
        "//data_compression/experimental/zstrong/cpp:openzl_cpp",
        "//data_compression/experimental/zstrong/custom_parsers/shared_components:numeric_graphs",
        "//data_compression/experimental/zstrong/tools:io",
        "//data_compression/experimental/zstrong/tools/training:train",
        "//data_compression/experimental/zstrong/tools/training:train_common",
        "//data_compression/experimental/zstrong/tools/training/clustering:clustering_graph_trainer",
    ],
)

python_library(
    name = "parsing_data_generator",
    srcs = ["parsing_data_generator.py"],
    labels = ["autodeps2_generated"],
)

python_library(
    name = "parsing_data_generator_correlated",
    srcs = ["parsing_data_generator_correlated.py"],
    labels = ["autodeps2_generated"],
)
